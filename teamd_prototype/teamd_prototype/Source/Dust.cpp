//=====================================================================
//							Dust.cpp
//						 塵エフェクトクラス
//=====================================================================

// Dust.h
#include "Vector2.h"			// 使用なし
#include "Effect.h"				// Vector2
#include "Dust.h"				// Effect

// Dust.cpp
#include "DxLib.h"

//---------------------------------------------------------------------
//　コンストラクタ
//---------------------------------------------------------------------
Dust::Dust()
{
	
}

//---------------------------------------------------------------------
//　デストラクタ
//---------------------------------------------------------------------
Dust::~Dust()
{

}

//---------------------------------------------------------------------
//　初期化
//---------------------------------------------------------------------
void Dust::Initialize()
{

}
void Dust::Initialize( Vector2 pos )
{
	//キャラクター情報
	SetPos( pos );
	SetSize( DUST_DIV_SIZE );
	SetExt( Vector2{ 1, 1 } );
	SetDelete( false );

	//アニメーションの設定
	_animIdx = 0;
	_animDust = 2;
}

//---------------------------------------------------------------------
//　終了処理
//---------------------------------------------------------------------
void Dust::Finalize()
{

}

//---------------------------------------------------------------------
//　更新
//---------------------------------------------------------------------
void Dust::Update()
{
	//アニメーション
	++_animIdx %= (int)(DUST_DIV_CNT.x * DUST_DIV_CNT.y) * _animDust;

	if ( _animIdx >=( DUST_DIV_CNT.x * DUST_DIV_CNT.y * _animDust ) -1 )
	{
		SetDelete( true );
	}
}

//---------------------------------------------------------------------
//　描画
//---------------------------------------------------------------------
void Dust::Draw()
{
	DxLib::DrawRotaGraph3(	_pos.x, _pos.y, _size.x * 0.5f, _size.y * 0.5f,
							1, 1, 0, _img[ _animIdx / _animDust ], true, false );
}
