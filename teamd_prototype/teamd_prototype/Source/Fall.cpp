//=====================================================================
//							Fall.cpp
//					  血飛沫エフェクトクラス
//=====================================================================

// Fall.h
#include "VECTOR2.h"			// 使用なし
#include "Effect.h"				// VECTOR2
#include "Fall.h"				// Effect

// Fall.cpp
#include "DxLib.h"

//---------------------------------------------------------------------
//　コンストラクタ
//---------------------------------------------------------------------
Fall::Fall()
{
	
}

//---------------------------------------------------------------------
//　デストラクタ
//---------------------------------------------------------------------
Fall::~Fall()
{

}

//---------------------------------------------------------------------
//　初期化
//---------------------------------------------------------------------
void Fall::Initialize()
{

}
void Fall::Initialize( Vector2 pos )
{
	//キャラクター情報
	SetPos( pos );
	SetSize( FALL_DIV_SIZE );
	SetExt( { 1, 1 } );
	SetDelete( false );

	//アニメーションの設定
	_animIdx = 0;
	_animFall = 2;
}

//---------------------------------------------------------------------
//　終了処理
//---------------------------------------------------------------------
void Fall::Finalize()
{

}

//---------------------------------------------------------------------
//　更新
//---------------------------------------------------------------------
void Fall::Update()
{
	//アニメーション
	++_animIdx %= (int)(FALL_DIV_CNT.x * FALL_DIV_CNT.y) * _animFall;

	if ( _animIdx >=(FALL_DIV_CNT.x * FALL_DIV_CNT.y * _animFall ) -1 )
	{
		SetDelete( true );
	}
}

//---------------------------------------------------------------------
//　描画
//---------------------------------------------------------------------
void Fall::Draw(const Vector2& offset_)
{
	DxLib::DrawRotaGraph3(	_pos.x - offset_.x, _pos.y - offset_.y, _size.x * 0.5f, _size.y * 0.5f,
							1, 1, 0, _img[ _animIdx / _animFall ], true, false );
}
