//=====================================================================
//							Blood.cpp
//					  血飛沫エフェクトクラス
//=====================================================================

// Blood.h
#include "VECTOR2.h"			// 使用なし
#include "Effect.h"				// VECTOR2
#include "Blood.h"				// Effect

// Blood.cpp
#include "DxLib.h"

//---------------------------------------------------------------------
//　コンストラクタ
//---------------------------------------------------------------------
Blood::Blood()
{
	
}

//---------------------------------------------------------------------
//　デストラクタ
//---------------------------------------------------------------------
Blood::~Blood()
{

}

//---------------------------------------------------------------------
//　初期化
//---------------------------------------------------------------------
void Blood::Initialize()
{

}
void Blood::Initialize( VECTOR2 pos )
{
	//キャラクター情報
	SetPos( pos );
	SetSize( BLOOD_DIV_SIZE );
	SetExt( { 1, 1 } );
	SetDelete( false );

	//アニメーションの設定
	_animIdx = 0;
	_animBlood = 2;
}

//---------------------------------------------------------------------
//　終了処理
//---------------------------------------------------------------------
void Blood::Finalize()
{

}

//---------------------------------------------------------------------
//　更新
//---------------------------------------------------------------------
void Blood::Update()
{
	//アニメーション
	++_animIdx %= BLOOD_DIV_CNT.x * BLOOD_DIV_CNT.y * _animBlood;

	if ( _animIdx >=( BLOOD_DIV_CNT.x * BLOOD_DIV_CNT.y * _animBlood ) -1 )
	{
		SetDelete( true );
	}
}

//---------------------------------------------------------------------
//　描画
//---------------------------------------------------------------------
void Blood::Draw()
{
	DxLib::DrawRotaGraph3(	_pos.x, _pos.y, _size.x * 0.5f, _size.y * 0.5f,
							1, 1, 0, _img[ _animIdx / _animBlood ], true, false );
}
